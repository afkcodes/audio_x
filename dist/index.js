var K=Object.defineProperty;var V=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var I=(s,e,t)=>e in s?K(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,R=(s,e)=>{for(var t in e||(e={}))ne.call(e,t)&&I(s,t,e[t]);if(V)for(var t of V(e))le.call(e,t)&&I(s,t,e[t]);return s};var n=(s,e)=>K(s,"name",{value:e,configurable:!0});var c=(s,e,t)=>I(s,typeof e!="symbol"?e+"":e,t);var p=(s,e,t)=>new Promise((r,i)=>{var o=A=>{try{_(t.next(A));}catch(y){i(y);}},u=A=>{try{_(t.throw(A));}catch(y){i(y);}},_=A=>A.done?r(A.value):Promise.resolve(A.value).then(o,u);_((t=t.apply(s,e)).next());});var Y=[{frequency:31,type:"lowshelf",gain:0,q:1.2},{frequency:63,type:"peaking",gain:0,q:1.2},{frequency:125,type:"peaking",gain:0,q:1.2},{frequency:250,type:"peaking",gain:0,q:1.2},{frequency:500,type:"peaking",gain:0,q:1.2},{frequency:1e3,type:"peaking",gain:0,q:1.2},{frequency:2e3,type:"peaking",gain:0,q:1.2},{frequency:4e3,type:"peaking",gain:0,q:1.2},{frequency:8e3,type:"peaking",gain:0,q:1.2},{frequency:16e3,type:"highshelf",gain:0,q:1.2}],F=[{name:"Default",id:"default",default:!0,gains:[0,0,0,0,0,0,0,0,0,0]},{name:"Club",id:"club",default:!0,gains:[0,0,4.8,3.36,3.36,3.36,1.92,0,0,0]},{name:"Live",id:"live",default:!0,gains:[-2.88,0,2.4,3.36,3.36,3.36,2.4,1.44,1.44,1.44]},{name:"Party",id:"Party",default:!0,gains:[4.32,4.32,0,0,0,0,0,0,4.32,4.32]},{name:"Pop",id:"pop",default:!0,gains:[.96,2.88,4.32,4.8,3.36,0,-1.44,-1.44,.96,.96]},{name:"Soft",id:"soft",default:!0,gains:[2.88,.96,0,-1.44,0,2.4,4.8,5.76,6.72,7.2]},{name:"Ska",id:"ska",default:!0,gains:[-1.44,-2.88,-2.4,0,2.4,3.36,5.28,5.76,6.72,5.76]},{name:"Reggae",id:"reggae",default:!0,gains:[0,0,0,-3.36,0,3.84,3.84,0,0,0]},{name:"Rock",id:"rock",default:!0,gains:[4.8,2.88,-3.36,-4.8,-1.92,2.4,5.28,6.72,6.72,6.72]},{name:"Dance",id:"dance",default:!0,gains:[5.76,4.32,1.44,0,0,-3.36,-4.32,-4.32,0,0]},{name:"Techno",id:"techno",default:!0,gains:[4.8,3.36,0,-3.36,-2.88,0,4.8,5.76,5.76,5.28]},{name:"Headphones",id:"headphones",default:!0,gains:[2.88,6.72,3.36,-1.92,-1.44,.96,2.88,5.76,7.68,8.64]},{name:"Soft rock",id:"soft_rock",default:!0,gains:[2.4,2.4,1.44,0,-2.4,-3.36,-1.92,0,1.44,5.28]},{name:"Classical",id:"classical",default:!0,gains:[0,0,0,0,0,0,-4.32,-4.32,-4.32,-5.76]},{name:"Large Hall",id:"large_hall",default:!0,gains:[6.24,6.24,3.36,3.36,0,-2.88,-2.88,-2.88,0,0]},{name:"Full Bass",id:"full_base",default:!0,gains:[4.8,5.76,5.76,3.36,.96,-2.4,-4.8,-6.24,-6.72,-6.72]},{name:"Full Treble",id:"full_treble",default:!0,gains:[-5.76,-5.76,-5.76,-2.4,1.44,6.72,9.6,9.6,9.6,10.08]},{name:"Laptop Speakers",id:"laptop_speakers",default:!0,gains:[2.88,6.72,3.36,-1.92,-1.44,.96,2.88,5.76,7.68,8.64]},{name:"Full Bass & Treble",id:"bass_treble",default:!0,gains:[4.32,3.36,0,-4.32,-2.88,.96,4.8,6.72,7.2,7.2]}];var k=Object.freeze({REACT:"REACT",VANILLA:"VANILLA",DEVELOPMENT:"development"}),l=Object.freeze({BUFFERING:"buffering",PLAYING:"playing",PAUSED:"paused",READY:"ready",IDLE:"idle",ENDED:"ended",STALLED:"stalled",ERROR:"error",TRACK_CHANGE:"trackchanged",DURATION_CHANGE:"durationchanged",QUEUE_ENDED:"queueended"}),b=Object.freeze({MEDIA_ERR_ABORTED:"The user canceled the audio.",MEDIA_ERR_DECODE:"An error occurred while decoding the audio.",MEDIA_ERR_NETWORK:"A network error occurred while fetching the audio.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The audio is missing or is in a format not supported by your browser.",DEFAULT:"An unknown error occurred."}),Q={HLS:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.5.11/hls.min.js",CAST:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"};var d,ce=(d=class{static validateEventName(e){if(!e||typeof e!="string")throw new Error("Invalid event name")}static notify(e,t,r="audiox_notifier_default"){this.validateEventName(e);let i=d.listeners[e];i&&t!==null&&(d.notifierState[e]=R(R({},d.notifierState[e]||{}),t),i.forEach(o=>{o(d.notifierState[e]);}));}static listen(e,t,r={}){if(this.validateEventName(e),typeof t!="function")throw new Error("Callback must be a function");return d.listeners[e]?d.listeners[e].add(t):(d.notifierState[e]=r,d.listeners[e]=new Set([t])),()=>{let i=d.listeners[e];i&&(i.delete(t),i.size===0&&delete d.listeners[e]);}}static multiListen(e,t,r={}){if(this.validateEventName(e),!Array.isArray(t)||t.length===0)throw new Error("Callbacks must be a non-empty array of functions");let i=t.map(o=>d.listen(e,o,r));return ()=>{i.forEach(o=>o());}}static getLatestState(e){return this.validateEventName(e),d.notifierState[e]}},n(d,"ChangeNotifier"),c(d,"listeners",{}),c(d,"notifierState",{}),d),f=ce;var h=n(s=>s&&Array.isArray(s)&&s.length,"isValidArray"),X=n(s=>s instanceof Function&&typeof s=="function","isValidFunction");var z={},j=n(s=>{let e="",t=s.error;switch(t==null?void 0:t.code){case MediaError.MEDIA_ERR_ABORTED:e+=b.MEDIA_ERR_ABORTED;break;case MediaError.MEDIA_ERR_NETWORK:e+=b.MEDIA_ERR_NETWORK;break;case MediaError.MEDIA_ERR_DECODE:e+=b.MEDIA_ERR_DECODE;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:e+=b.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:e+=b.DEFAULT;break}return e},"getReadableErrorMessage"),$=n(s=>{var y;let{title:e,album:t,artist:r,artwork:i}=s,o=i?(y=i[0])==null?void 0:y.src:"",_=["96x96","128x128","192x192","256x256","384x384","512x512"].map(P=>({src:o,sizes:P,type:"image/png"}));return {title:e,album:t,artist:r,artwork:_}},"metaDataCreator"),x=0,L=n((s,e)=>{let t=new Set;for(let o=0;o<s.played.length;o++){let u=s.played.start(o),A=s.played.end(o)-u;t.add(A);}let i=[...t].reduce((o,u)=>o+u,0);x=["ENDED","TRACK_CHANGE","PAUSE"].includes(e)?i:x,f.notify("AUDIO_STATE",{currentTrackPlayTime:i,previousTrackPlayTime:x});},"calculateActualPlayedLength"),W=n((s,e,t)=>new Promise((r,i)=>{if(window instanceof Window&&window.document)if(z[t])e(),r();else {z[t]=!0;let o=document.createElement("script");o.type="text/javascript",o.src=s,o.async=!0,o.onload=()=>{e(),r();},document.head.appendChild(o);}else i(`Window not ready unable to initialize ${t}`);}),"loadScript"),J=n(()=>{let s=new T,e=!1,t=n(r=>{if(r.playbackState==="ended"&&!e){let i=s.getQueue();e=!0,i&&h(i)&&e&&s.playNext();}r.playbackState!=="ended"&&(e=!1);},"audioStateListener");f.listen("AUDIO_STATE",t);},"handleQueuePlayback"),m=n(s=>{let{buffered:e}=s,t=0;for(let r=0;r<e.length;r++)t+=e.end(r)-e.start(r);return t},"getBufferedDuration"),Z=n(s=>{let e=[...s];for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*t);[e[t],e[r]]=[e[r],e[t]];}return e},"shuffle"),N=n((s,e)=>{if(s===null&&e===null)return !0;if(s===null||e===null||typeof s!=typeof e)return !1;if(typeof s!="object")return s===e;if(Array.isArray(s)&&Array.isArray(e))return s.length!==e.length?!1:s.every((i,o)=>N(i,e[o]));let t=Object.keys(s),r=Object.keys(e);return t.length!==r.length?!1:t.every(i=>r.includes(i)?N(s[i],e[i]):!1)},"diffChecker");var g,q=(g=class{constructor(){c(this,"audioCtx");c(this,"audioCtxStatus");c(this,"eqFilterBands");c(this,"bassBoostFilter");c(this,"compressor");if(g._instance)return g._instance;this.initializeAudioContext(),g._instance=this;}initializeAudioContext(){let e={latencyHint:"playback"};typeof AudioContext!="undefined"?this.audioCtx=new AudioContext(e):typeof window.webkitAudioContext!="undefined"&&(this.audioCtx=new window.webkitAudioContext(e)),this.audioCtxStatus="ACTIVE",this.init(),this.audioCtx.state==="suspended"&&this.addResumeListener();}addResumeListener(){let e=n(()=>{this.audioCtx.resume(),setTimeout(()=>{this.audioCtx.state==="running"&&document.body.removeEventListener("click",e,!1);},0);},"resume");document.body.addEventListener("click",e,!1);}init(){try{let e=T.getAudioInstance(),t=this.audioCtx.createMediaElementSource(e),r=Y.map(i=>{let o=this.audioCtx.createBiquadFilter();return o.type=i.type,o.frequency.value=i.frequency,o.gain.value=i.gain,o.Q.value=i.q||1,o});this.compressor=this.audioCtx.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.knee.value=30,this.compressor.ratio.value=12,this.compressor.attack.value=.003,this.compressor.release.value=.25,this.bassBoostFilter=this.audioCtx.createBiquadFilter(),this.bassBoostFilter.type="lowshelf",this.bassBoostFilter.frequency.value=100,this.bassBoostFilter.gain.value=0,t.connect(r[0]);for(let i=0;i<r.length-1;i++)r[i].connect(r[i+1]);r[r.length-1].connect(this.bassBoostFilter),this.bassBoostFilter.connect(this.compressor),this.compressor.connect(this.audioCtx.destination),this.audioCtxStatus="ACTIVE",this.eqFilterBands=r;}catch(e){this.audioCtxStatus="FAILED";}}setPreset(e){let t=F.find(i=>i.id===e);if(!t||!this.eqFilterBands||this.eqFilterBands.length!==t.gains.length)return;let r=this.audioCtx.currentTime;this.eqFilterBands.forEach((i,o)=>{let u=t.gains[o];i.gain.setTargetAtTime(u,r,.05);});}static getPresets(){return F}status(){return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.audioCtxStatus}setCustomEQ(e){if(h(e)&&e.length===this.eqFilterBands.length){let t=this.audioCtx.currentTime;this.eqFilterBands.forEach((r,i)=>{r.gain.setTargetAtTime(e[i],t,.05);});}}setBassBoost(e,t=6){let r=this.audioCtx.currentTime;e?this.bassBoostFilter.gain.setTargetAtTime(t,r,.05):this.bassBoostFilter.gain.setTargetAtTime(0,r,.05);}setCompressorSettings(e){this.compressor&&(e.threshold!==void 0&&this.compressor.threshold.setTargetAtTime(e.threshold,this.audioCtx.currentTime,.01),e.knee!==void 0&&this.compressor.knee.setTargetAtTime(e.knee,this.audioCtx.currentTime,.01),e.ratio!==void 0&&this.compressor.ratio.setTargetAtTime(e.ratio,this.audioCtx.currentTime,.01),e.attack!==void 0&&this.compressor.attack.setTargetAtTime(e.attack,this.audioCtx.currentTime,.01),e.release!==void 0&&this.compressor.release.setTargetAtTime(e.release,this.audioCtx.currentTime,.01));}reset(){let e=this.audioCtx.currentTime;this.eqFilterBands.forEach(t=>{t.gain.setTargetAtTime(0,e,.05);}),this.bassBoostFilter.gain.setTargetAtTime(0,e,.05);}},n(g,"Equalizer"),c(g,"_instance"),g);var ee={ERROR:n((s,e)=>{let t=e.type,r=e.details,i=e.fatal;f.notify("AUDIO_STATE",{playbackState:l.ERROR,error:{type:t,isFatal:i,detail:r}},`audiox_baseEvents_state_${s.type}`);},"ERROR"),FRAG_CHANGED:n(()=>{},"FRAG_CHANGED")};var v=Object.freeze({ABORT:"abort",TIME_UPDATE:"timeupdate",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",ENDED:"ended",EMPTIED:"emptied",PLAYING:"playing",WAITING:"waiting",SEEKING:"seeking",SEEKED:"seeked",LOADED_META_DATA:"loadedmetadata",LOADED_DATA:"loadeddata",PLAY:"play",PAUSE:"pause",RATE_CHANGE:"ratechange",VOLUME_CHANGE:"volumechange",SUSPEND:"suspend",STALLED:"stalled",PROGRESS:"progress",LOAD_START:"loadstart",ERROR:"error",TRACK_CHANGE:"trackchange",QUEUE_ENDED:"queueended"}),te={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACKS_CLEARED:"hlsSubtitleTracksCleared",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached",BACK_BUFFER_REACHED:"hlsBackBufferReached"};var H=n((s,e=!1)=>{let t=T.getAudioInstance();h(Object.keys(s))&&Object.keys(s).forEach(r=>{let i=r;t==null||t.addEventListener(v[i],o=>{if(r&&s[i]){let u=s[i];typeof u=="function"&&u(o,t,e);}});});},"attachEventListeners");var se=n((s,e=!1)=>{let r=new C().getHlsInstance();h(Object.keys(s))&&Object.keys(s).forEach(i=>{let o=i;r.on(te[o],(u,_)=>{if(o&&s[o]){let A=s[o];typeof A=="function"&&A(u,_,r,e);}});});},"attachHlsEventsListeners");var O,S,ue=(S=class{constructor(){c(this,"HlsClass");if(S._instance)return S._instance;S._instance=this;}load(){return p(this,null,function*(){return yield W(Q.HLS,()=>{},"hls").then(()=>{this.HlsClass=window.Hls,window.Hls=void 0;}).catch(e=>{}),this.HlsClass})}init(){return p(this,arguments,function*(e={},t){let r=yield this.load();r.isSupported()&&(O=new r(e),se(ee,t));})}addHlsMedia(e){let t=this.HlsClass,r=T.getAudioInstance();O.loadSource(e.source),O.attachMedia(r),O.on(t.Events.MEDIA_ATTACHED,function(){});}getHlsInstance(){return O}},n(S,"HlsAdapter"),c(S,"_instance"),S),C=ue;var re=Object.freeze({1:"MEDIA_ERR_ABORTED",3:"MEDIA_ERR_DECODE",2:"MEDIA_ERR_NETWORK",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"});var E=f,ie={LOAD_START:n((s,e)=>{let t=m(e);E.notify("AUDIO_STATE",{playbackState:l.BUFFERING,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""},bufferedDuration:t},`audiox_baseEvents_state_${s.type}`);},"LOAD_START"),DURATION_CHANGE:n((s,e)=>{let t=E.getLatestState("AUDIO_X_STATE"),r=m(e);E.notify("AUDIO_STATE",{playbackState:t.playbackState==="playing"?l.PLAYING:l.DURATION_CHANGE,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""},bufferedDuration:r},`audiox_baseEvents_state_${s.type}`);},"DURATION_CHANGE"),LOADED_META_DATA:n((s,e)=>{let t=m(e);E.notify("AUDIO_STATE",{playbackState:l.BUFFERING,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""},bufferedDuration:t},`audiox_baseEvents_state_${s.type}`);},"LOADED_META_DATA"),LOADED_DATA:n((s,e)=>{let t=m(e);E.notify("AUDIO_STATE",{playbackState:l.BUFFERING,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""},bufferedDuration:t},`audiox_baseEvents_state_${s.type}`);},"LOADED_DATA"),CAN_PLAY:n((s,e)=>{let t=E.getLatestState("AUDIO_X_STATE"),r=m(e);E.notify("AUDIO_STATE",{playbackState:t.playbackState==="paused"?l.PAUSED:l.READY,error:{code:null,message:"",readable:""},bufferedDuration:r},`audiox_baseEvents_state_${s.type}`);},"CAN_PLAY"),CAN_PLAY_THROUGH:n((s,e)=>{let t=E.getLatestState("AUDIO_X_STATE"),r=e.paused,i=m(e);E.notify("AUDIO_STATE",{playbackState:r?l.PAUSED:t.playbackState==="playing"?l.PLAYING:l.READY,error:{code:null,message:"",readable:""},bufferedDuration:i},`audiox_baseEvents_state_${s.type}`);},"CAN_PLAY_THROUGH"),PLAY:n((s,e)=>{E.notify("AUDIO_STATE",{playbackState:l.PLAYING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},"PLAY"),PLAYING:n((s,e)=>{E.notify("AUDIO_STATE",{playbackState:l.PLAYING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},"PLAYING"),PAUSE:n((s,e,t)=>{E.notify("AUDIO_STATE",{playbackState:l.PAUSED,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`),t&&L(e,"PAUSE");},"PAUSE"),ENDED:n((s,e,t)=>{E.notify("AUDIO_STATE",{playbackState:l.ENDED,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`),t&&L(e,"ENDED");},"ENDED"),ERROR:n((s,e)=>{var i;let t=(i=e.error)==null?void 0:i.code,r=j(e);E.notify("AUDIO_STATE",{playbackState:l.ERROR,error:{code:t,message:re[t],readable:r}},`audiox_baseEvents_state_${s.type}`);},"ERROR"),TIME_UPDATE:n((s,e)=>{let t=E.getLatestState("AUDIO_X_STATE"),r=m(e);E.notify("AUDIO_STATE",{playbackState:e.paused?t==null?void 0:t.playbackState:l.PLAYING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""},bufferedDuration:r},`audiox_baseEvents_state_${s.type}`);},"TIME_UPDATE"),WAITING:n((s,e)=>{E.notify("AUDIO_STATE",{playbackState:l.BUFFERING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},"WAITING"),VOLUME_CHANGE:n(s=>{E.notify("AUDIO_STATE",{},"audiox_baseEvents_state");},"VOLUME_CHANGE"),SEEKED:n((s,e)=>{let t=E.getLatestState("AUDIO_X_STATE"),r=m(e);E.notify("AUDIO_STATE",{playbackState:t.playbackState==="paused"?"paused":t.playbackState,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""},bufferedDuration:r},`audiox_baseEvents_state_${s.type}`);},"SEEKED")};var ae=n(s=>{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata($(s)));},"updateMetaData"),w=n(()=>{let s=new T;"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{T.getAudioInstance().play();}),navigator.mediaSession.setActionHandler("pause",()=>{T.getAudioInstance().pause();}),s.getQueue().length&&(navigator.mediaSession.setActionHandler("previoustrack",()=>{s.playPrevious();}),navigator.mediaSession.setActionHandler("nexttrack",()=>{s.playNext();})));},"attachMediaSessionHandlers");var G={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},B={playbackState:l.IDLE,duration:0,bufferedDuration:0,progress:0,volume:50,playbackRate:1,error:{code:null,message:"",readable:""},currentTrack:{},currentTrackPlayTime:0,previousTrackPlayTime:0};f.listen("AUDIO_STATE",s=>{let e=f.getLatestState("AUDIO_X_STATE");N(e,s)||f.notify("AUDIO_X_STATE",R(R({},B),s));},B);var a,U=f,D,T=(D=class{constructor(){c(this,"_audio");c(this,"isPlayLogEnabled");c(this,"_queue");c(this,"_currentQueueIndex",0);c(this,"_fetchFn");c(this,"eqStatus","IDEAL");c(this,"isEqEnabled",!1);c(this,"eqInstance");c(this,"showNotificationsActions",!1);var e;if(D._instance)return D._instance;if(process.env.NODE_ENV!==((e=k)==null?void 0:e.DEVELOPMENT)&&a)throw new Error("Cannot create multiple audio instance");D._instance=this,this._audio=new Audio,a=this._audio;}init(e){return p(this,null,function*(){var M;let{preloadStrategy:t="auto",autoPlay:r=!1,useDefaultEventListeners:i=!0,customEventListeners:o=null,showNotificationActions:u=!1,enablePlayLog:_=!1,enableHls:A=!1,enableEQ:y=!1,crossOrigin:P=null,hlsConfig:oe={}}=e;(M=this._audio)==null||M.setAttribute("id","audio_x_instance"),this._audio.preload=t,this._audio.autoplay=r,this._audio.crossOrigin=P,this.isPlayLogEnabled=_,this.isEqEnabled=y,o!==null?H(o,!1):H(ie,_),u&&(this.showNotificationsActions=!0,w()),A&&new C().init(oe,_);})}addMedia(e,t){return p(this,null,function*(){if(!e)return;t&&!e.source.length&&(this._fetchFn=t);let r=this.getQueue();if(h(r)){let o=r.findIndex(u=>e.id===u.id);o>-1&&(this._currentQueueIndex=o);}let i=e.source.includes(".m3u8")?"HLS":"DEFAULT";if(this.isPlayLogEnabled&&L(a,"TRACK_CHANGE"),i==="HLS"&&!a.canPlayType("application/vnd.apple.mpegurl")){let o=new C,u=o.getHlsInstance();u?(u.detachMedia(),o.addHlsMedia(e)):yield this.reset();}else a.src=e.source;U.notify("AUDIO_STATE",{playbackState:l.TRACK_CHANGE,currentTrackPlayTime:0,currentTrack:e}),ae(e),a.load();})}attachEq(){if(this.eqStatus==="IDEAL")try{let e=new q;this.eqStatus=e.status(),this.eqInstance=e;}catch(e){}}play(){return p(this,null,function*(){let e=a.src!=="";a!=null&&a.paused&&a.HAVE_ENOUGH_DATA===G.HAVE_ENOUGH_DATA&&e&&(yield a.play().then(()=>{}).catch(()=>{})),this.isEqEnabled&&this.attachEq();})}addMediaAndPlay(e,t){return p(this,null,function*(){let r=e||(this._queue.length>0?this._queue[0]:void 0);t&&X(t)&&(r!=null&&r.source.length)&&(this._fetchFn=t,yield t(r));try{r&&this.addMedia(r).then(()=>{a.HAVE_ENOUGH_DATA===G.HAVE_ENOUGH_DATA&&setTimeout(()=>p(this,null,function*(){yield this.play(),this.isEqEnabled&&this.attachEq();}),950);});}catch(i){}})}pause(){a&&!(a!=null&&a.paused)&&(a==null||a.pause());}stop(){a&&!a.paused&&(a==null||a.pause(),a.currentTime=0);}reset(){return p(this,null,function*(){a&&(this.stop(),a.src="",a.srcObject=null);})}setVolume(e){let t=e/100;a&&(a.volume=t,U.notify("AUDIO_STATE",{volume:e}));}setPlaybackRate(e){a&&(a.playbackRate=e,U.notify("AUDIO_STATE",{playbackRate:e}));}mute(){a&&!a.muted&&(a.muted=!0);}seek(e){a&&(a.currentTime=e);}seekBy(e){if(a&&a.currentTime){let t=a.currentTime;a.currentTime=t+e;}}destroy(){return p(this,null,function*(){a&&(yield this.reset(),a.removeAttribute("src"),a.load());})}subscribe(e,t,r={}){return U.listen(e,t,r)}addEventListener(e,t){a.addEventListener(e,t);}getPresets(){return q.getPresets()}setPreset(e){this.isEqEnabled&&this.eqInstance.setPreset(e);}setCustomEQ(e){this.isEqEnabled&&this.eqInstance.setCustomEQ(e);}setBassBoost(e,t){this.isEqEnabled&&this.eqInstance.setBassBoost(e,t);}addQueue(e,t){this.clearQueue();let r=h(e)?e.slice():[];switch(t){case"DEFAULT":this._queue=r;break;case"REVERSE":this._queue=r.reverse();break;case"SHUFFLE":this._queue=Z(r);break;default:this._queue=r;break}J(),this.showNotificationsActions&&w();}playNext(){var t;let e=this._currentQueueIndex+1;if(((t=this==null?void 0:this._queue)==null?void 0:t.length)>e){let r=this._queue[e];this.addMediaAndPlay(r,this._fetchFn),this._currentQueueIndex=e;}else this.stop(),U.notify("AUDIO_STATE",{playbackState:l.QUEUE_ENDED});}playPrevious(){let e=(this==null?void 0:this._currentQueueIndex)-1;if(e>=0){let t=this==null?void 0:this._queue[e];this.addMediaAndPlay(t,this._fetchFn),this._currentQueueIndex=e;}}clearQueue(){this._queue&&h(this._queue)&&(this._queue=[],this._currentQueueIndex=0);}addToQueue(e){this._queue&&h(this._queue)&&(Array.isArray(e)?this._queue=[...this._queue,...e]:this._queue.push(e));}removeFromQueue(e){if(this._queue&&h(this._queue)){let t=this._queue.filter(r=>r.id==e.id);this._queue=t;}}getQueue(){return this._queue&&h(this._queue)?this._queue:[]}get id(){return a==null?void 0:a.getAttribute("id")}static getAudioInstance(){return a}},n(D,"AudioX"),c(D,"_instance"),D);

export { v as AUDIO_EVENTS, B as AUDIO_STATE, k as AUDIO_X_CONSTANTS, T as AudioX };
//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map