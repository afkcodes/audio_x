var B=Object.defineProperty;var v=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?B(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,y=(s,e)=>{for(var t in e||(e={}))re.call(e,t)&&b(s,t,e[t]);if(v)for(var t of v(e))ne.call(e,t)&&b(s,t,e[t]);return s};var o=(s,e)=>B(s,"name",{value:e,configurable:!0});var l=(s,e,t)=>(b(s,typeof e!="symbol"?e+"":e,t),t);var h=(s,e,t)=>new Promise((i,a)=>{var n=A=>{try{p(t.next(A));}catch(g){a(g);}},d=A=>{try{p(t.throw(A));}catch(g){a(g);}},p=A=>A.done?i(A.value):Promise.resolve(A.value).then(n,d);p((t=t.apply(s,e)).next());});var q=[{frequency:31,type:"lowshelf",gain:0},{frequency:63,type:"peaking",gain:0},{frequency:125,type:"peaking",gain:0},{frequency:250,type:"peaking",gain:0},{frequency:500,type:"peaking",gain:0},{frequency:1e3,type:"peaking",gain:0},{frequency:2e3,type:"peaking",gain:0},{frequency:4e3,type:"peaking",gain:0},{frequency:8e3,type:"peaking",gain:0},{frequency:16e3,type:"highshelf",gain:0}],I=[{id:"preset_default",name:"Default",gains:[0,0,0,0,0,0,0,0,0,0]},{id:"preset_live",name:"Live",gains:[-1,1,2,3,3,3,2,1,1,1]},{id:"preset_acoustic",name:"Acoustic",gains:[4,4,3,1,2,2,3,3,3,1]},{id:"preset_classical",name:"Classical",gains:[4,3,2,1,-1,-1,0,1,2,3]},{id:"preset_piano",name:"Piano",gains:[3,2,0,2.5,3,1.5,3,3,3,3]},{id:"preset_lounge",name:"Lounge",gains:[-2,-1,0,1,4,1,0,-1,1,.5]},{id:"preset_spoken_word",name:"Spoken Word",gains:[-2,0,0,1,4,5,5,5,2,0]},{id:"preset_jazz",name:"Jazz",gains:[4,3,1,2,-1,-1,0,1,2,4]},{id:"preset_pop",name:"Pop",gains:[.5,1.5,2,2.5,2,0,-.5,-.5,.5,.5]},{id:"preset_dance",name:"Dance",gains:[4,6,4.5,0,2,3,5,5,4.5,0]},{id:"preset_latin",name:"Latin",gains:[2.5,1.5,0,0,-1.5,-1.5,-1.5,0,3,4]},{id:"preset_rnb",name:"RnB",gains:[3,5,4.5,1,-2,-1.5,3,3,3.5,4]},{id:"preset_hiphop",name:"HipHop",gains:[5,4,1,2,-1,-.5,1,-.5,2,3]},{id:"preset_electronic",name:"Electronic",gains:[4,3.5,1,0,-2,2,1,1.5,4,5]},{id:"preset_techno",name:"Techno",gains:[3,2,0,-1.5,-1.5,0,3,4,4,4]},{id:"preset_deep",name:"Deep",gains:[5,4,1,.5,3,2,1,-2,-4,-5]},{id:"preset_club",name:"Club",gains:[0,0,3,2,2,2,1,0,0,0]},{id:"preset_rock",name:"Rock",gains:[6,5,4,1,-.5,0,.5,2,4,5]},{id:"preset_rock_soft",name:"Rock Soft",gains:[1.5,0,0,-.5,0,1,3,4,4,5]},{id:"preset_ska",name:"Ska",gains:[-.5,-1,-1,0,1,2,3,4,4,4]},{id:"preset_reggae",name:"Reggae",gains:[0,0,0,-1.5,0,2,2,0,0,0]},{id:"preset_country",name:"Country",gains:[2,2,1,0,-1,0,2,3,3,3]},{id:"preset_funk",name:"Funk",gains:[3,4,3,0,-1,0,2,3,4,4]},{id:"preset_blues",name:"Blues",gains:[2,1,0,-1,0,1,2,3,3,3]},{id:"preset_metal",name:"Metal",gains:[6,5,4,2,1,1,0,2,3,4]},{id:"preset_indie",name:"Indie",gains:[2,2,2,1,0,-1,-2,0,3,3]},{id:"preset_chill",name:"Chill",gains:[1,1,0,-1,-2,-1,1,2,3,2]},{id:"preset_world",name:"World",gains:[2,2,0,-1.5,-1,1,3,3,4,3]},{id:"preset_alternative",name:"Alternative",gains:[2,2,1,0,-1,-2,1,3,4,3]},{id:"preset_ambient",name:"Ambient",gains:[0,-1,-2,-2.5,-2,0,1,2,2,2]},{id:"preset_mellow",name:"Mellow",gains:[1,1,0,-1,-2,-1,1,2,2,1]},{id:"preset_grunge",name:"Grunge",gains:[4,3,3,2,1,0,0,2,3,4]},{id:"preset_soul",name:"Soul",gains:[3,3,2,1,0,-1,0,2,3,3]},{id:"preset_folk",name:"Folk",gains:[2,1,0,-1,-2,-1,1,2,3,2]},{id:"preset_trap",name:"Trap",gains:[6,5,3,1,-2,-1,1,3,4,5]},{id:"preset_dubstep",name:"Dubstep",gains:[5,4,3,2,2,1,1,2,3,4]}];var P=Object.freeze({REACT:"REACT",VANILLA:"VANILLA",DEVELOPMENT:"development"}),c=Object.freeze({BUFFERING:"buffering",PLAYING:"playing",PAUSED:"paused",READY:"ready",IDLE:"idle",ENDED:"ended",STALLED:"stalled",ERROR:"error",TRACK_CHANGE:"trackchanged",DURATION_CHANGE:"durationchanged"}),R=Object.freeze({MEDIA_ERR_ABORTED:"The user canceled the audio.",MEDIA_ERR_DECODE:"An error occurred while decoding the audio.",MEDIA_ERR_NETWORK:"A network error occurred while fetching the audio.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The audio is missing or is in a format not supported by your browser.",DEFAULT:"An unknown error occurred."}),V={HLS:"https://cdn.jsdelivr.net/npm/hls.js/dist/hls.min.js"};var u,oe=(u=class{static validateEventName(e){if(!e||typeof e!="string")throw new Error("Invalid event name")}static notify(e,t,i="audiox_notifier_default"){this.validateEventName(e);let a=u.listeners[e];a&&t!==null&&(u.notifierState[e]=y(y({},u.notifierState[e]||{}),t),a.forEach(n=>{n(u.notifierState[e]);}));}static listen(e,t,i={}){if(this.validateEventName(e),typeof t!="function")throw new Error("Callback must be a function");return u.listeners[e]?u.listeners[e].add(t):(u.notifierState[e]=i,u.listeners[e]=new Set([t])),()=>{let a=u.listeners[e];a&&(a.delete(t),a.size===0&&delete u.listeners[e]);}}static multiListen(e,t,i={}){if(this.validateEventName(e),!Array.isArray(t)||t.length===0)throw new Error("Callbacks must be a non-empty array of functions");let a=t.map(n=>u.listen(e,n,i));return ()=>{a.forEach(n=>n());}}static getLatestState(e){return this.validateEventName(e),u.notifierState[e]}},o(u,"ChangeNotifier"),l(u,"listeners",{}),l(u,"notifierState",{}),u),_=oe;var T=o(s=>s&&Array.isArray(s)&&s.length,"isValidArray"),Y=o(s=>s instanceof Function&&typeof s=="function","isValidFunction");var K={},z=o(s=>{let e="",t=s.error;switch(t==null?void 0:t.code){case MediaError.MEDIA_ERR_ABORTED:e+=R.MEDIA_ERR_ABORTED;break;case MediaError.MEDIA_ERR_NETWORK:e+=R.MEDIA_ERR_NETWORK;break;case MediaError.MEDIA_ERR_DECODE:e+=R.MEDIA_ERR_DECODE;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:e+=R.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:e+=R.DEFAULT;break}return e},"getReadableErrorMessage"),X=o(s=>{var g;let{title:e,album:t,artist:i,artwork:a}=s,n=a?(g=a[0])==null?void 0:g.src:"",p=["96x96","128x128","192x192","256x256","384x384","512x512"].map(U=>({src:n,sizes:U,type:"image/png"}));return {title:e,album:t,artist:i,artwork:p}},"metaDataCreator"),F=0,L=o((s,e)=>{let t=new Set;for(let n=0;n<s.played.length;n++){let d=s.played.start(n),A=s.played.end(n)-d;t.add(A);}let a=[...t].reduce((n,d)=>n+d,0);F=["ENDED","TRACK_CHANGE","PAUSE"].includes(e)?a:F,_.notify("AUDIO_STATE",{currentTrackPlayTime:a,previousTrackPlayTime:F});},"calculateActualPlayedLength"),Q=o((s,e,t)=>new Promise((i,a)=>{if(window instanceof Window&&window.document)if(K[t])e(),i();else {K[t]=!0;let n=document.createElement("script");n.type="text/javascript",n.src=s,n.async=!0,n.onload=()=>{e(),i();},document.head.appendChild(n);}else a(`Window not ready unable to initialize ${t}`);}),"loadScript"),j=o(()=>{let s=new f,e=s.getQueue(),t=!1,i=o(a=>{a.playbackState==="ended"&&!t&&(t=!0,e&&T(e)&&s.playNext()),a.playbackState!=="ended"&&(t=!1);},"audioStateListener");_.listen("AUDIO_STATE",i);},"handleQueuePlayback"),$=o(s=>{let e=[...s];for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*t);[e[t],e[i]]=[e[i],e[t]];}return e},"shuffle");var S,k=(S=class{constructor(){l(this,"audioCtx");l(this,"audioCtxStatus");l(this,"eqFilterBands");l(this,"MAX_GAIN_SUM",12);if(S._instance)return S._instance;this.initializeAudioContext(),S._instance=this;}initializeAudioContext(){typeof AudioContext!="undefined"?this.audioCtx=new AudioContext:typeof window.webkitAudioContext!="undefined"&&(this.audioCtx=new window.webkitAudioContext),this.audioCtxStatus="ACTIVE",this.init(),this.audioCtx.state==="suspended"&&this.addResumeListener();}addResumeListener(){let e=o(()=>{this.audioCtx.resume(),setTimeout(()=>{this.audioCtx.state==="running"&&document.body.removeEventListener("click",e,!1);},0);},"resume");document.body.addEventListener("click",e,!1);}init(){try{let e=f.getAudioInstance(),t=this.audioCtx.createMediaElementSource(e),i=q.map(n=>{let d=this.audioCtx.createBiquadFilter();return d.type=n.type,d.frequency.value=n.frequency,d.gain.value=n.gain,d.Q.value=1,d}),a=this.audioCtx.createGain();a.gain.value=1,t.connect(i[0]);for(let n=0;n<i.length-1;n++)i[n].connect(i[n+1]);i[i.length-1].connect(a),a.connect(this.audioCtx.destination),this.audioCtxStatus="ACTIVE",this.eqFilterBands=i;}catch(e){this.audioCtxStatus="FAILED";}}setPreset(e){let t=I.find(a=>a.id===e);if(!t||!this.eqFilterBands||this.eqFilterBands.length!==t.gains.length)return;let i=this.normalizeGains(t.gains);this.eqFilterBands.forEach((a,n)=>{a.gain.value=i[n];});}normalizeGains(e){let t=e.reduce((i,a)=>i+Math.abs(a),0);if(t>this.MAX_GAIN_SUM){let i=this.MAX_GAIN_SUM/t;return e.map(a=>a*i)}return e}static getPresets(){return I}status(){return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.audioCtxStatus}setCustomEQ(e){if(T(e)){let t=this.normalizeGains(e);this.eqFilterBands.forEach((i,a)=>{i.gain.value=t[a];});}}},o(S,"Equalizer"),l(S,"_instance"),S);var W={ERROR:(s,e)=>{let t=e.type,i=e.details,a=e.fatal;_.notify("AUDIO_STATE",{playbackState:c.ERROR,error:{type:t,isFatal:a,detail:i}},`audiox_baseEvents_state_${s.type}`);},FRAG_CHANGED:()=>{}};var G=Object.freeze({ABORT:"abort",TIME_UPDATE:"timeupdate",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",ENDED:"ended",EMPTIED:"emptied",PLAYING:"playing",WAITING:"waiting",SEEKING:"seeking",SEEKED:"seeked",LOADED_META_DATA:"loadedmetadata",LOADED_DATA:"loadeddata",PLAY:"play",PAUSE:"pause",RATE_CHANGE:"ratechange",VOLUME_CHANGE:"volumechange",SUSPEND:"suspend",STALLED:"stalled",PROGRESS:"progress",LOAD_START:"loadstart",ERROR:"error",TRACK_CHANGE:"trackchange"}),J={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACKS_CLEARED:"hlsSubtitleTracksCleared",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached",BACK_BUFFER_REACHED:"hlsBackBufferReached"};var H=o((s,e=!1)=>{let t=f.getAudioInstance();T(Object.keys(s))&&Object.keys(s).forEach(i=>{let a=i;t==null||t.addEventListener(G[a],n=>{if(i&&s[a]){let d=s[a];typeof d=="function"&&d(n,t,e);}});});},"attachEventListeners");var Z=o((s,e=!1)=>{let i=new O().getHlsInstance();T(Object.keys(s))&&Object.keys(s).forEach(a=>{let n=a;i.on(J[n],(d,p)=>{if(n&&s[n]){let A=s[n];typeof A=="function"&&A(d,p,i,e);}});});},"attachHlsEventsListeners");var C,D,le=(D=class{constructor(){l(this,"HlsClass");if(D._instance)return D._instance;D._instance=this;}load(){return h(this,null,function*(){return yield Q(V.HLS,()=>{},"hls").then(()=>{this.HlsClass=window.Hls,window.Hls=void 0;}).catch(e=>{}),this.HlsClass})}init(){return h(this,arguments,function*(e={},t){let i=yield this.load();i.isSupported()&&(C=new i(e),Z(W,t));})}addHlsMedia(e){let t=this.HlsClass,i=f.getAudioInstance();C.loadSource(e.source),C.attachMedia(i),C.on(t.Events.MEDIA_ATTACHED,function(){});}getHlsInstance(){return C}},o(D,"HlsAdapter"),l(D,"_instance"),D),O=le;var ee=Object.freeze({1:"MEDIA_ERR_ABORTED",3:"MEDIA_ERR_DECODE",2:"MEDIA_ERR_NETWORK",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"});var E=_,te={LOAD_START:(s,e)=>{E.notify("AUDIO_STATE",{playbackState:c.BUFFERING,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},DURATION_CHANGE:(s,e)=>{let t=E.getLatestState("AUDIO_X_STATE");E.notify("AUDIO_STATE",{playbackState:t.playbackState==="playing"?c.PLAYING:c.DURATION_CHANGE,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},LOADED_META_DATA:(s,e)=>{E.notify("AUDIO_STATE",{playbackState:c.BUFFERING,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},LOADED_DATA:(s,e)=>{E.notify("AUDIO_STATE",{playbackState:c.BUFFERING,duration:e==null?void 0:e.duration,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},CAN_PLAY:s=>{E.notify("AUDIO_STATE",{playbackState:c.READY,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},CAN_PLAY_THROUGH:s=>{let e=E.getLatestState("AUDIO_X_STATE");E.notify("AUDIO_STATE",{playbackState:e.playbackState==="playing"?c.PLAYING:c.READY,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},PLAY:(s,e)=>{E.notify("AUDIO_STATE",{playbackState:c.PLAYING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},PLAYING:(s,e)=>{E.notify("AUDIO_STATE",{playbackState:c.PLAYING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},PAUSE:(s,e,t)=>{E.notify("AUDIO_STATE",{playbackState:c.PAUSED,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`),t&&L(e,"PAUSE");},ENDED:(s,e,t)=>{E.notify("AUDIO_STATE",{playbackState:c.ENDED,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`),t&&L(e,"ENDED");},ERROR:(s,e)=>{var a;let t=(a=e.error)==null?void 0:a.code,i=z(e);E.notify("AUDIO_STATE",{playbackState:c.ERROR,error:{code:t,message:ee[t],readable:i}},`audiox_baseEvents_state_${s.type}`);},TIME_UPDATE:(s,e)=>{let t=E.getLatestState("AUDIO_X_STATE");E.notify("AUDIO_STATE",{playbackState:e.paused?t==null?void 0:t.playbackState:c.PLAYING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},WAITING:(s,e)=>{E.notify("AUDIO_STATE",{playbackState:c.BUFFERING,progress:e==null?void 0:e.currentTime,error:{code:null,message:"",readable:""}},`audiox_baseEvents_state_${s.type}`);},VOLUME_CHANGE:s=>{E.notify("AUDIO_STATE",{},"audiox_baseEvents_state");}};var se=o(s=>{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata(X(s)));},"updateMetaData"),ie=o(()=>{"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{f.getAudioInstance().play();}),navigator.mediaSession.setActionHandler("pause",()=>{f.getAudioInstance().pause();}));},"attachMediaSessionHandlers");var M={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},x={playbackState:c.IDLE,duration:0,bufferedDuration:0,progress:0,volume:50,playbackRate:1,error:{code:null,message:"",readable:""},currentTrack:{},currentTrackPlayTime:0,previousTrackPlayTime:0};_.listen("AUDIO_STATE",s=>{_.notify("AUDIO_X_STATE",y(y({},x),s));},x);var r,N=_,m,f=(m=class{constructor(){l(this,"_audio");l(this,"isPlayLogEnabled");l(this,"_queue");l(this,"_currentQueueIndex",0);l(this,"_fetchFn");l(this,"eqStatus","IDEAL");l(this,"isEqEnabled",!1);l(this,"eqInstance");var e;if(m._instance)return m._instance;if(process.env.NODE_ENV!==((e=P)==null?void 0:e.DEVELOPMENT)&&r)throw new Error("Cannot create multiple audio instance");m._instance=this,this._audio=new Audio,r=this._audio;}init(e){return h(this,null,function*(){var w;let{preloadStrategy:t="auto",autoPlay:i=!1,useDefaultEventListeners:a=!0,customEventListeners:n=null,showNotificationActions:d=!1,enablePlayLog:p=!1,enableHls:A=!1,enableEQ:g=!1,crossOrigin:U="anonymous",hlsConfig:ae={}}=e;(w=this._audio)==null||w.setAttribute("id","audio_x_instance"),this._audio.preload=t,this._audio.autoplay=i,this._audio.crossOrigin=U,this.isPlayLogEnabled=p,n!==null?H(n,!1):H(te,p),d&&ie(),g&&(this.isEqEnabled=g),A&&new O().init(ae,p);})}addMedia(e){return h(this,null,function*(){if(!e)return;let t=e.source.includes(".m3u8")?"HLS":"DEFAULT";if(this.isPlayLogEnabled&&L(r,"TRACK_CHANGE"),t==="HLS"){let i=new O,a=i.getHlsInstance();a?(a.detachMedia(),i.addHlsMedia(e)):yield this.reset();}else r.src=e.source;N.notify("AUDIO_STATE",{playbackState:c.TRACK_CHANGE,currentTrackPlayTime:0,currentTrack:e}),se(e),r.load();})}attachEq(){if(this.isEqEnabled&&this.eqStatus==="IDEAL")try{let e=new k;this.eqStatus=e.status(),this.eqInstance=e;}catch(e){}}play(){return h(this,null,function*(){let e=r.src!=="";r!=null&&r.paused&&r.HAVE_ENOUGH_DATA===M.HAVE_ENOUGH_DATA&&e&&(yield r.play().then(()=>{}).catch(()=>{}));})}addMediaAndPlay(e,t){return h(this,null,function*(){let i=e||(this._queue.length>0?this._queue[0]:void 0);t&&Y(t)&&i&&(this._fetchFn=t,yield t(i)),this._queue&&T(this._queue)&&(this._currentQueueIndex=this._queue.findIndex(a=>a.id===(i==null?void 0:i.id)));try{i&&this.addMedia(i).then(()=>{r.HAVE_ENOUGH_DATA===M.HAVE_ENOUGH_DATA&&setTimeout(()=>h(this,null,function*(){this.attachEq(),yield this.play();}),950);});}catch(a){}})}pause(){r&&!(r!=null&&r.paused)&&(r==null||r.pause());}stop(){r&&!r.paused&&(r==null||r.pause(),r.currentTime=0);}reset(){return h(this,null,function*(){r&&(this.stop(),r.src="",r.srcObject=null);})}setVolume(e){let t=e/100;r&&(r.volume=t,N.notify("AUDIO_STATE",{volume:e}));}setPlaybackRate(e){r&&(r.playbackRate=e,N.notify("AUDIO_STATE",{playbackRate:e}));}mute(){r&&!r.muted&&(r.muted=!0);}seek(e){r&&(r.currentTime=e);}destroy(){return h(this,null,function*(){r&&(yield this.reset(),r.removeAttribute("src"),r.load());})}subscribe(e,t,i={}){return N.listen(e,t,i)}addEventListener(e,t){r.addEventListener(e,t);}getPresets(){return k.getPresets()}setPreset(e){this.eqInstance.setPreset(e);}setCustomEQ(e){this.eqInstance.setCustomEQ(e);}addQueue(e,t){let i=T(e)?e.slice():[];switch(t){case"DEFAULT":this._queue=i;break;case"REVERSE":this._queue=i.reverse();break;case"SHUFFLE":this._queue=$(i);break;default:this._queue=i;break}j();}playNext(){if(this._queue.length>this._currentQueueIndex+1){this._currentQueueIndex++;let e=this._queue[this._currentQueueIndex];this.addMediaAndPlay(e,this._fetchFn);}}playPrevious(){if(this._currentQueueIndex>0){this._currentQueueIndex--;let e=this._queue[this._currentQueueIndex];this.addMediaAndPlay(e,this._fetchFn);}}clearQueue(){this._queue&&T(this._queue)&&(this._queue=[]);}removeFromQueue(e){if(this._queue&&T(this._queue)){let t=this._queue.filter(i=>i.id==e.id);this._queue=t;}}getQueue(){return this._queue&&T(this._queue)?this._queue:[]}get id(){return r==null?void 0:r.getAttribute("id")}static getAudioInstance(){return r}},o(m,"AudioX"),l(m,"_instance"),m);

export { G as AUDIO_EVENTS, x as AUDIO_STATE, P as AUDIO_X_CONSTANTS, f as AudioX };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map