function e(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t){if(Array.isArray(t))return e(t)}function n(e,t,n,r,o,a,i){try{var u=e[a](i);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,o)}}function r(e){return function(){var t=this,r=arguments;return new Promise(function(o,a){var i=e.apply(t,r);function u(e){n(i,o,a,u,c,"next",e)}function c(e){n(i,o,a,u,c,"throw",e)}u(undefined)})}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function i(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function u(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function c(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function l(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(t){u(e,t,n[t])})}return e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t){r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}n.push.apply(n,r)}return n}function E(e,t){t=t!=null?t:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function v(e){return t(e)||l(e)||y(e)||s()}function A(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function y(t,n){if(!t)return;if(typeof t==="string")return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}function p(e,t){var n,r,o,a,i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),"throw":u(1),"return":u(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=a[0]&2?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;if(r=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(a[0]===6&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}if(o[2])i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e];r=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}(function(e){"use strict";var t=Object.defineProperty;var n=function(e,n,r){return n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};var a=function(e,n){return t(e,"name",{value:n,configurable:!0})};var u=function(e,t,r){return n(e,(typeof t==="undefined"?"undefined":A(t))!="symbol"?t+"":t,r),r};var l=Object.freeze({REACT:"REACT",VANILLA:"VANILLA",DEVELOPMENT:"development"}),s=Object.freeze({BUFFERING:"buffering",PLAYING:"playing",PAUSED:"paused",READY:"ready",IDLE:"idle",ENDED:"ended",STALLED:"stalled",ERROR:"error"}),d=Object.freeze({MEDIA_ERR_ABORTED:"The user canceled the audio.",MEDIA_ERR_DECODE:"An error occurred while decoding the audio.",MEDIA_ERR_NETWORK:"A network error occurred while fetching the audio.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The audio is missing or is in a format not supported by your browser.",DEFAULT:"An unknown error occurred."});var y=a(function(e){return e&&Array.isArray(e)&&e.length},"isValidArray"),_=a(function(e){return c(e,Function)&&typeof e=="function"},"isValidFunction"),b=a(function(e){return typeof e=="object"&&e!==null&&c(e,Object)&&Object.keys(e).length},"isValidObject"),T=a(function(e){var t;var n="";switch((t=e.error)===null||t===void 0?void 0:t.code){case MediaError.MEDIA_ERR_ABORTED:n+=d.MEDIA_ERR_ABORTED;break;case MediaError.MEDIA_ERR_NETWORK:n+=d.MEDIA_ERR_NETWORK;break;case MediaError.MEDIA_ERR_DECODE:n+=d.MEDIA_ERR_DECODE;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:n+=d.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:n+=d.DEFAULT;break}return n},"getReadableErrorMessage"),O=a(function(e){var t;var n=e.title,r=e.album,o=e.artist,a=e.artwork,i=a?(t=a[0])===null||t===void 0?void 0:t.src:"",u=["96x96","128x128","192x192","256x256","384x384","512x512"].map(function(e){return{src:i,sizes:e,type:"image/png"}});return{title:n,album:r,artist:o,artwork:u}},"metaDataCreator");var D={},g={},R,m=(R=function(){function e(){o(this,e)}i(e,null,[{key:"notify",value:function e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"audiox_notifier_default";var r=D[e];r&&(_(r)&&t!==null&&(console.log("NOTIFYING TO EVENT : ".concat(e," - CALLER : ").concat(n)),b(t)?g[e]=f({},g[e],t):g[e]=t,r(g[e])),y(Array.from(r))&&t!==null&&(b(t)?g[e]=f({},g[e],t):g[e]=t,r.forEach(function(t){t(g[e])})))}},{key:"listen",value:function e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!D[e]&&_(t))g[e]||(g[e]=n),D[e]=new Set().add(t);else{var r=v(D[e]);D[e].forEach(function(){r.push(t)}),D[e]=new Set(r)}return function(t,n){D[e]?(console.log("REMOVING EVENT LISTENER FOR EVENT : ".concat(e," - CALLER : ").concat(t)),delete D[e],n&&g[e]&&(console.log("RESETTING STATE FOR EVENT : ".concat(e," - CALLER : ").concat(t)),delete g[e])):console.log("EVENT NOT FOUND : ".concat(e))}}}]);return e}(),a(R,"ChangeNotifier"),R),h=m;var S=Object.freeze({1:"MEDIA_ERR_ABORTED",3:"MEDIA_ERR_DECODE",2:"MEDIA_ERR_NETWORK",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"});var I=h,N={LOADED_META_DATA:function(e,t){var n;console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.BUFFERING,duration:(n=t)===null||n===void 0?void 0:n.duration,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_state_".concat(e.type))},CAN_PLAY:function(e){console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.BUFFERING,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},CAN_PLAY_THROUGH:function(e){console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.READY,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},PLAY:function(e,t){var n;console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.PLAYING,progress:(n=t)===null||n===void 0?void 0:n.currentTime,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},PAUSE:function(e,t){var n;console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.PAUSED,progress:(n=t)===null||n===void 0?void 0:n.currentTime,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},ENDED:function(e,t){var n;console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.ENDED,progress:(n=t)===null||n===void 0?void 0:n.currentTime,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},ERROR:function(e,t){var n;console.log(e.type);var r=(n=t.error)===null||n===void 0?void 0:n.code,o=T(t);I.notify("AUDIO_STATE",{playbackState:s.PAUSED,error:{code:r,message:S[r],readable:o}},"audiox_baseEvents_state_".concat(e.type))},TIME_UPDATE:function(e,t){var n;I.notify("AUDIO_STATE",{playbackState:s.PLAYING,progress:(n=t)===null||n===void 0?void 0:n.currentTime,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},WAITING:function(e,t){var n;console.log(e.type),I.notify("AUDIO_STATE",{playbackState:s.BUFFERING,progress:(n=t)===null||n===void 0?void 0:n.currentTime,error:{code:null,message:"",readable:""}},"audiox_baseEvents_state_".concat(e.type))},VOLUME_CHANGE:function(e){console.log(e.type),I.notify("AUDIO_STATE",{},"audiox_baseEvents_state")}};var k=Object.freeze({ABORT:"abort",TIME_UPDATE:"timeupdate",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",ENDED:"ended",EMPTIED:"emptied",PLAYING:"playing",WAITING:"waiting",SEEKING:"seeking",SEEKED:"seeked",LOADED_META_DATA:"loadedmetadata",LOADED_DATA:"loadeddata",PLAY:"play",PAUSE:"pause",RATE_CHANGE:"ratechange",VOLUME_CHANGE:"volumechange",SUSPEND:"suspend",STALLED:"stalled",PROGRESS:"progress",LOAD_START:"loadstart",ERROR:"error"});var U=a(function(e){var t=H.getAudioInstance();y(Object.keys(e))&&Object.keys(e).forEach(function(n){var r;var o=n;(r=t)===null||r===void 0?void 0:r.addEventListener(k[o],function(r){if(n&&e[o]){var a=e[o];typeof a=="function"&&a(r,t)}})})},"attachDefaultEventListeners"),w=a(function(e){var t=H.getAudioInstance();y(e)&&e.forEach(function(e){var n;var r=e;Object.keys(k).includes(r)&&((n=t)===null||n===void 0?void 0:n.addEventListener(k[r],function(e){h.notify(k[r],{e:e,audioInstance:t})}))})},"attachCustomEventListeners");var P=a(function(e){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata(O(e)))},"updateMetaData"),L=a(function(){"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",function(){H.getAudioInstance().play()}),navigator.mediaSession.setActionHandler("pause",function(){H.getAudioInstance().pause()}))},"attachMediaSessionHandlers");var M={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},j={playbackState:s.IDLE,duration:0,bufferedDuration:0,progress:0,volume:50,playbackRate:1,error:{code:null,message:"",readable:""},currentTrack:{}};h.listen("AUDIO_STATE",function(e){h.notify("AUDIO_X_STATE",f({},j,e))},j);var C,G=h,V,H=(V=function(){function e(){o(this,e);var t;u(this,"_audio");if(V._instance)return console.warn("Instantiation failed: cannot create multiple instance of AudioX returning existing instance"),V._instance;if(process.env.NODE_ENV!==((t=l)===null||t===void 0?void 0:t.DEVELOPMENT)&&C)throw new Error("Cannot create multiple audio instance");V._instance=this,this._audio=new Audio}i(e,[{key:"init",value:function e(e){var t=this;return r(function(){var n,r,o,a,i,u,c,l,s,f,d;return p(this,function(E){r=e.preloadStrategy,o=r===void 0?"auto":r,a=e.autoplay,i=a===void 0?!1:a,u=e.useDefaultEventListeners,c=u===void 0?!0:u,l=e.customEventListeners,s=l===void 0?null:l,f=e.showNotificationActions,d=f===void 0?!1:f;(n=t._audio)===null||n===void 0?void 0:n.setAttribute("id","audio_x_instance"),t._audio.preload=o,t._audio.autoplay=i,C=t._audio,(c||s==null)&&U(N),d&&L();return[2]})})()}},{key:"addMedia",value:function e(e){return r(function(){return p(this,function(t){e&&(C.src=e.source,G.notify("AUDIO_STATE",E(f({},j),{currentTrack:e})),P(e));return[2]})})()}},{key:"play",value:function e(){return r(function(){var e,t,n;return p(this,function(r){switch(r.label){case 0:t=C.src!=="";n=((e=C)===null||e===void 0?void 0:e.paused)&&C.HAVE_ENOUGH_DATA===M.HAVE_ENOUGH_DATA&&t;if(!n)return[3,2];return[4,C.play()];case 1:n=r.sent();r.label=2;case 2:n;return[2]}})})()}},{key:"addMediaAndPlay",value:function e(e){var t=this;return r(function(){return p(this,function(n){e&&t.addMedia(e).then(function(){C.HAVE_ENOUGH_DATA===M.HAVE_ENOUGH_DATA&&setTimeout(r(function(){return p(this,function(e){switch(e.label){case 0:return[4,t.play()];case 1:e.sent();return[2]}})}),950)});return[2]})})()}},{key:"pause",value:function e(){var e,t;C&&!((e=C)===null||e===void 0?void 0:e.paused)&&((t=C)===null||t===void 0?void 0:t.pause())}},{key:"stop",value:function e(){var e;C&&!C.paused&&((e=C)===null||e===void 0?void 0:e.pause(),C.currentTime=0)}},{key:"reset",value:function e(){var e=this;return r(function(){return p(this,function(t){C&&(e.stop(),C.src="",C.srcObject=null);return[2]})})()}},{key:"setVolume",value:function e(e){var t=e/100;C&&(C.volume=t,G.notify("AUDIO_STATE",E(f({},j),{volume:e})))}},{key:"setPlaybackRate",value:function e(e){C&&(C.playbackRate=e,G.notify("AUDIO_STATE",E(f({},j),{playbackRate:e})))}},{key:"mute",value:function e(){C&&!C.muted&&(C.muted=!0)}},{key:"seek",value:function e(e){C&&(C.currentTime=e)}},{key:"destroy",value:function e(){var e=this;return r(function(){var t;return p(this,function(n){switch(n.label){case 0:t=C;if(!t)return[3,2];return[4,e.reset()];case 1:t=(n.sent(),C.removeAttribute("src"),C.load());n.label=2;case 2:t;return[2]}})})()}},{key:"subscribe",value:function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G.listen(e,t,n)}},{key:"attachEventListeners",value:function e(e){w(e)}},{key:"id",get:function e(){var e;return(e=C)===null||e===void 0?void 0:e.getAttribute("id")}},{key:"media",set:function e(e){var t;C&&(C.src=(t=e)===null||t===void 0?void 0:t.source)}}],[{key:"getAudioInstance",value:function e(){return C}}]);return e}(),a(V,"AudioX"),u(V,"_instance"),V);e.AUDIO_EVENTS=k;e.AUDIO_STATE=j;e.AUDIO_X_CONSTANTS=l;e.AudioX=H;return e})({});//# sourceMappingURL=index.global.js.map